# TinyAArch64

- 微程序控制器的原理是将机器指令的执行分解为一系列微操作，并把这些微操作以微指令的形式编码到控制存储器中。通过读取控制存储器中的微指令，微程序控制器可以按照指令的微程序顺序执行微操- 作，从而实现机器指令的执行。
- 微程序控制器的核心组成包括：
- 控制存储器(CM):存储各条指令对应的微程序，可以采用ROM 存储。
- 微指令寄存器(MIR):用于存储当前执行的微指令。
- 微地址形成部件:负责生成控制存储器中的微指令地址，保证微指令的连续执行。
- 时序系统:提供时序信号，控制微指令的执行。
- 微地址寄存器(uPC):存放控制存储器中下一条微指令的地址。
- 微程序控制器的工作流程如下：
- 指令取址:处理器从主存储器中读取机器指令。
- 地址转换:根据机器指令中的操作码，微地址形成部件生成控制存储器中对应微程序的第一条微指令的地址。
- 微指令取值:从控制存储器中读取微指令，并将微指令内容送入微指令寄存器。
- 微指令译码:微指令寄存器中的微指令被译码，生成微命令，控制处理器内部的各种微操作。
- 执行微操作:微命令控制处理器部件执行相应的微操作。
- 微指令地址更新:微地址形成部件根据当前微指令内容（如是否跳转）确定下一条微指令的地址，并将地址送入微地址寄存器。
- 重复步骤3-6:重复执行微指令，直到微程序结束，完成机器指令的执行。
- 微程序控制器的优点在于其灵活性和可扩展性，可以方便地实现复杂指令系统和定制化的指令。